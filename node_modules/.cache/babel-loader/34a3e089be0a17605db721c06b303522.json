{"ast":null,"code":"var _jsxFileName = \"/Users/nicolaspavon/Desktop/ReposFacu/seguridadFE/src/Screens/Main.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Container, Button, makeStyles, Card, CardContent, Typography } from \"@material-ui/core\";\nimport useToken from \"../Hooks/useToken\";\nimport moment from \"moment\";\nimport \"moment/locale/es\";\nimport { useHistory } from \"react-router-dom\";\nimport { Title } from \"../Components\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst axios = require(\"axios\").default;\n\nconst capitalize = phrase => {\n  return phrase.charAt(0).toUpperCase() + phrase.slice(1);\n};\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\"\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main\n  },\n  form: {\n    width: \"100%\",\n    marginTop: theme.spacing(1)\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  },\n  root: {\n    minWidth: 275,\n    background: \"#4287f5\",\n    marginBottom: 20,\n    marginRight: 20\n  },\n  root2: {\n    minWidth: 275,\n    background: \"#4287f5\",\n    marginBottom: 20\n  },\n  title: {\n    fontSize: 22,\n    color: \"white\",\n    fontWeight: \"500\"\n  }\n}));\n\nconst formatDate = date => {\n  const dia = moment(date).format(\"dddd\");\n  const fecha = moment(date).format(\"LL\");\n  return dia + \" \" + fecha;\n};\n\nconst Main = () => {\n  _s();\n\n  const {\n    token,\n    setToken\n  } = useToken();\n  const history = useHistory();\n  const classes = useStyles();\n  const [userCI, setUserCI] = useState(\"\");\n  const [userName, setUserName] = useState(\"\");\n  const [place, setPlace] = useState(\"\");\n  const [firstDosis, setFirstDosis] = useState(\"\");\n  const [secondDosis, setSecondDosis] = useState(\"\");\n  const [fdReceived, setFdReceived] = useState(false);\n  const [sdReceived, setSdReceived] = useState(false);\n  const [hasContact, setHasContact] = useState(false);\n\n  const refreshUser = ci => {\n    axios.post(\"http://localhost:8080/coronavirus/refresh\", {\n      ci: ci\n    }).then(function (response) {\n      const {\n        data\n      } = response;\n\n      if (data) {\n        const {\n          dosis1,\n          dosis2,\n          fecha_vac_1,\n          fecha_vac_2,\n          contacto\n        } = data;\n\n        if (dosis1) {\n          setFdReceived(dosis1);\n        }\n\n        if (dosis2) {\n          setSdReceived(dosis2);\n        }\n\n        if (fecha_vac_1) {\n          setFirstDosis(fecha_vac_1);\n        }\n\n        if (fecha_vac_2) {\n          setSecondDosis(fecha_vac_2);\n        }\n\n        if (contacto) {\n          contacto.includes(\"NO estuvo\") ? setHasContact(false) : setHasContact(true);\n        }\n      }\n    }).catch(function (error) {\n      console.log(\"Error\", error);\n    });\n  };\n\n  useEffect(() => {\n    let ciUser = \"\";\n\n    if (token) {\n      const {\n        fecha_vac_1,\n        fecha_vac_2,\n        apellidos,\n        dosis1,\n        dosis2,\n        nombre,\n        locacion,\n        ci\n      } = token;\n      setUserName(nombre + \" \" + apellidos);\n      setPlace(locacion);\n      const fechaPrimerDosis = moment(fecha_vac_1).format(\"dddd e MMMM\") + \" a las \" + (\"HORA\", moment(fecha_vac_1).format(\"LT\")) + \" hs\";\n      const fechaSegundaDosis = moment(fecha_vac_2).format(\"dddd e MMMM\") + \" a las \" + (\"HORA\", moment(fecha_vac_2).format(\"LT\")) + \" hs\";\n      setFirstDosis(capitalize(fechaPrimerDosis));\n      setSecondDosis(capitalize(fechaSegundaDosis));\n      setFdReceived(dosis1);\n      setSdReceived(dosis2);\n      setUserCI(ci);\n      ciUser = ci;\n    }\n\n    refreshUser(ciUser);\n  }, []);\n\n  if (!token) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flexDirection: \"column\",\n        display: \"flex\",\n        justifyContent: \"space-evenly\",\n        height: 500\n      },\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        variant: \"contained\",\n        size: \"large\",\n        color: \"primary\",\n        onClick: () => {\n          history.push(\"/signup\");\n        },\n        children: \"REGISTRARSE\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        variant: \"contained\",\n        size: \"large\",\n        color: \"primary\",\n        onClick: () => {\n          history.push(\"/signin\");\n        },\n        children: \"INGRESAR\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.paper,\n      children: [hasContact && /*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          color: \"red\",\n          fontWeight: \"bold\"\n        },\n        children: \"ESTUVO EN CONTACTO CON UN COVID POSITIVO\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Title, {\n        text: \"Usuario\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          marginBottom: 30\n        },\n        children: userName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flexDirection: \"row\",\n          flex: 1,\n          display: \"flex\",\n          justifyContent: \"center\"\n        },\n        children: [fdReceived && /*#__PURE__*/_jsxDEV(Card, {\n          variant: \"outlined\",\n          className: sdReceived ? classes.root : classes.root2,\n          children: /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h5\",\n              component: \"h2\",\n              children: \"Primera dosis recibida el:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              className: classes.title,\n              variant: \"h5\",\n              component: \"h2\",\n              children: formatDate(firstDosis)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 13\n        }, this), sdReceived && /*#__PURE__*/_jsxDEV(Card, {\n          variant: \"outlined\",\n          className: fdReceived ? classes.root : classes.root2,\n          children: /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h5\",\n              component: \"h2\",\n              children: \"Segunda dosis recibida el:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              className: classes.title,\n              variant: \"h5\",\n              component: \"h2\",\n              children: formatDate(secondDosis)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        variant: \"contained\",\n        size: \"large\",\n        color: \"primary\",\n        style: {\n          width: 300,\n          marginBottom: 20\n        },\n        onClick: () => {\n          history.push(\"/check\");\n        },\n        children: \"Consultar estado\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        variant: \"contained\",\n        size: \"large\",\n        color: \"primary\",\n        style: {\n          width: 300,\n          marginBottom: 20\n        },\n        onClick: () => {\n          history.push(\"/alert\");\n        },\n        children: \"Alertar Positivo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        variant: \"contained\",\n        size: \"large\",\n        style: {\n          width: 300,\n          marginBottom: 20\n        },\n        color: \"primary\",\n        onClick: () => {\n          history.push(\"/agenda\");\n        },\n        children: \"Reservar Cupo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        variant: \"contained\",\n        size: \"large\",\n        style: {\n          width: 300,\n          marginBottom: 20\n        } // className={classes.submit}\n        ,\n        color: \"primary\",\n        onClick: () => {\n          history.push(\"/cancel\");\n        },\n        children: \"Cancelar Reserva\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        variant: \"contained\",\n        size: \"medium\",\n        className: classes.submit,\n        color: \"primary\",\n        onClick: () => {\n          setToken();\n          sessionStorage.clear();\n        },\n        children: \"Salir\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 181,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Main, \"D5do4sP5ym3DP45jvq4aVU9dNmA=\", false, function () {\n  return [useToken, useHistory, useStyles];\n});\n\n_c = Main;\nexport default Main;\n\nvar _c;\n\n$RefreshReg$(_c, \"Main\");","map":{"version":3,"sources":["/Users/nicolaspavon/Desktop/ReposFacu/seguridadFE/src/Screens/Main.jsx"],"names":["React","useState","useEffect","Container","Button","makeStyles","Card","CardContent","Typography","useToken","moment","useHistory","Title","axios","require","default","capitalize","phrase","charAt","toUpperCase","slice","useStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","root","minWidth","background","marginBottom","marginRight","root2","title","fontSize","color","fontWeight","formatDate","date","dia","format","fecha","Main","token","setToken","history","classes","userCI","setUserCI","userName","setUserName","place","setPlace","firstDosis","setFirstDosis","secondDosis","setSecondDosis","fdReceived","setFdReceived","sdReceived","setSdReceived","hasContact","setHasContact","refreshUser","ci","post","then","response","data","dosis1","dosis2","fecha_vac_1","fecha_vac_2","contacto","includes","catch","error","console","log","ciUser","apellidos","nombre","locacion","fechaPrimerDosis","fechaSegundaDosis","justifyContent","height","push","flex","sessionStorage","clear"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  Container,\n  Button,\n  makeStyles,\n  Card,\n  CardContent,\n  Typography,\n} from \"@material-ui/core\";\nimport useToken from \"../Hooks/useToken\";\nimport moment from \"moment\";\nimport \"moment/locale/es\";\nimport { useHistory } from \"react-router-dom\";\nimport { Title } from \"../Components\";\nconst axios = require(\"axios\").default;\n\nconst capitalize = (phrase) => {\n  return phrase.charAt(0).toUpperCase() + phrase.slice(1);\n};\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: \"100%\",\n    marginTop: theme.spacing(1),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n  root: {\n    minWidth: 275,\n    background: \"#4287f5\",\n    marginBottom: 20,\n    marginRight: 20,\n  },\n  root2: {\n    minWidth: 275,\n    background: \"#4287f5\",\n    marginBottom: 20,\n  },\n  title: {\n    fontSize: 22,\n    color: \"white\",\n    fontWeight: \"500\",\n  },\n}));\n\nconst formatDate = (date) => {\n  const dia = moment(date).format(\"dddd\");\n  const fecha = moment(date).format(\"LL\");\n  return dia + \" \" + fecha;\n};\n\nconst Main = () => {\n  const { token, setToken } = useToken();\n  const history = useHistory();\n  const classes = useStyles();\n\n  const [userCI, setUserCI] = useState(\"\");\n  const [userName, setUserName] = useState(\"\");\n  const [place, setPlace] = useState(\"\");\n  const [firstDosis, setFirstDosis] = useState(\"\");\n  const [secondDosis, setSecondDosis] = useState(\"\");\n  const [fdReceived, setFdReceived] = useState(false);\n  const [sdReceived, setSdReceived] = useState(false);\n  const [hasContact, setHasContact] = useState(false);\n\n  const refreshUser = (ci) => {\n    axios\n      .post(\"http://localhost:8080/coronavirus/refresh\", { ci: ci })\n      .then(function (response) {\n        const { data } = response;\n        if (data) {\n          const { dosis1, dosis2, fecha_vac_1, fecha_vac_2, contacto } = data;\n          if (dosis1) {\n            setFdReceived(dosis1);\n          }\n          if (dosis2) {\n            setSdReceived(dosis2);\n          }\n          if (fecha_vac_1) {\n            setFirstDosis(fecha_vac_1);\n          }\n          if (fecha_vac_2) {\n            setSecondDosis(fecha_vac_2);\n          }\n          if (contacto) {\n            contacto.includes(\"NO estuvo\")\n              ? setHasContact(false)\n              : setHasContact(true);\n          }\n        }\n      })\n      .catch(function (error) {\n        console.log(\"Error\", error);\n      });\n  };\n\n  useEffect(() => {\n    let ciUser = \"\";\n    if (token) {\n      const {\n        fecha_vac_1,\n        fecha_vac_2,\n        apellidos,\n        dosis1,\n        dosis2,\n        nombre,\n        locacion,\n        ci,\n      } = token;\n      setUserName(nombre + \" \" + apellidos);\n      setPlace(locacion);\n      const fechaPrimerDosis =\n        moment(fecha_vac_1).format(\"dddd e MMMM\") +\n        \" a las \" +\n        (\"HORA\", moment(fecha_vac_1).format(\"LT\")) +\n        \" hs\";\n      const fechaSegundaDosis =\n        moment(fecha_vac_2).format(\"dddd e MMMM\") +\n        \" a las \" +\n        (\"HORA\", moment(fecha_vac_2).format(\"LT\")) +\n        \" hs\";\n      setFirstDosis(capitalize(fechaPrimerDosis));\n      setSecondDosis(capitalize(fechaSegundaDosis));\n      setFdReceived(dosis1);\n      setSdReceived(dosis2);\n      setUserCI(ci);\n      ciUser = ci;\n    }\n    refreshUser(ciUser);\n  }, []);\n\n  if (!token) {\n    return (\n      <div\n        style={{\n          flexDirection: \"column\",\n          display: \"flex\",\n          justifyContent: \"space-evenly\",\n          height: 500,\n        }}\n      >\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          size=\"large\"\n          color=\"primary\"\n          onClick={() => {\n            history.push(\"/signup\");\n          }}\n        >\n          REGISTRARSE\n        </Button>\n\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          size=\"large\"\n          color=\"primary\"\n          onClick={() => {\n            history.push(\"/signin\");\n          }}\n        >\n          INGRESAR\n        </Button>\n      </div>\n    );\n  }\n\n  return (\n    <Container>\n      <div className={classes.paper}>\n        {hasContact && (\n          <h1 style={{ color: \"red\", fontWeight: \"bold\" }}>\n            ESTUVO EN CONTACTO CON UN COVID POSITIVO\n          </h1>\n        )}\n        <Title text=\"Usuario\" />\n        <h3 style={{ marginBottom: 30 }}>{userName}</h3>\n\n        {/* {place && firstDosis && (\n          <div>\n            <Title text=\"Primera Dosis\" />\n            <h3>{firstDosis}</h3>\n            <h2>Vacunatorio</h2>\n            <h4>{place}</h4>\n          </div>\n        )}\n\n        {place && secondDosis && (\n          <div>\n            <Title text=\"Segunda Dosis\" />\n            <h3>{firstDosis}</h3>\n            <h2>Vacunatorio</h2>\n            <h4>{place}</h4>\n          </div>\n        )} */}\n\n        <div\n          style={{\n            flexDirection: \"row\",\n            flex: 1,\n            display: \"flex\",\n            justifyContent: \"center\",\n          }}\n        >\n          {fdReceived && (\n            <Card\n              variant=\"outlined\"\n              className={sdReceived ? classes.root : classes.root2}\n            >\n              <CardContent>\n                <Typography variant=\"h5\" component=\"h2\">\n                  Primera dosis recibida el:\n                </Typography>\n                <Typography\n                  className={classes.title}\n                  variant=\"h5\"\n                  component=\"h2\"\n                >\n                  {formatDate(firstDosis)}\n                </Typography>\n              </CardContent>\n            </Card>\n          )}\n\n          {sdReceived && (\n            <Card\n              variant=\"outlined\"\n              className={fdReceived ? classes.root : classes.root2}\n            >\n              <CardContent>\n                <Typography variant=\"h5\" component=\"h2\">\n                  Segunda dosis recibida el:\n                </Typography>\n                <Typography\n                  className={classes.title}\n                  variant=\"h5\"\n                  component=\"h2\"\n                >\n                  {formatDate(secondDosis)}\n                </Typography>\n              </CardContent>\n            </Card>\n          )}\n        </div>\n\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          size=\"large\"\n          color=\"primary\"\n          style={{ width: 300, marginBottom: 20 }}\n          onClick={() => {\n            history.push(\"/check\");\n          }}\n        >\n          Consultar estado\n        </Button>\n\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          size=\"large\"\n          color=\"primary\"\n          style={{ width: 300, marginBottom: 20 }}\n          onClick={() => {\n            history.push(\"/alert\");\n          }}\n        >\n          Alertar Positivo\n        </Button>\n\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          size=\"large\"\n          style={{ width: 300, marginBottom: 20 }}\n          color=\"primary\"\n          onClick={() => {\n            history.push(\"/agenda\");\n          }}\n        >\n          Reservar Cupo\n        </Button>\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          size=\"large\"\n          style={{ width: 300, marginBottom: 20 }}\n          // className={classes.submit}\n          color=\"primary\"\n          onClick={() => {\n            history.push(\"/cancel\");\n          }}\n        >\n          Cancelar Reserva\n        </Button>\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          size=\"medium\"\n          className={classes.submit}\n          color=\"primary\"\n          onClick={() => {\n            setToken();\n            sessionStorage.clear();\n          }}\n        >\n          Salir\n        </Button>\n      </div>\n    </Container>\n  );\n};\n\nexport default Main;\n"]},"metadata":{},"sourceType":"module"}