{"ast":null,"code":"import axios from \"axios\";\nconst API_URL = \"http://localhost:8080/seguridad\";\nexport const login = (username, password) => {\n  return axios.post(API_URL + \"login\", {\n    username,\n    password\n  }).then(response => {\n    if (response.data.accessToken) {\n      console.log(response.data); // localStorage.setItem(\"user\", JSON.stringify(response.data));\n    }\n\n    return response.data;\n  });\n};\nexport const logout = () => {\n  localStorage.removeItem(\"user\");\n};\nexport const register = (username, email, password) => {\n  return axios.post(API_URL + \"registro\", {\n    username,\n    email,\n    password\n  });\n};\nexport const getUsers = () => {\n  return axios.get(API_URL + 'users', {\n    headers: authHeader()\n  });\n};\nexport const makeAdmin = () => {\n  return axios.get(API_URL + 'makeAdmin', {\n    headers: authHeader()\n  }); // necesita un /id para identificar el usuario\n};\nexport const updateUser = () => {\n  return axios.get(API_URL + 'user', {\n    headers: authHeader()\n  }); // necesita un /id para identificar el usuario\n};\nexport const authHeader = () => {\n  const user = JSON.parse(localStorage.getItem('user'));\n\n  if (user && user.accessToken) {\n    return {\n      Authorization: 'Bearer ' + user.accessToken\n    };\n  } else {\n    return {};\n  }\n};","map":{"version":3,"sources":["/Users/nicolaspavon/Desktop/ReposFacu/seguridadFE/src/Utils/api.js"],"names":["axios","API_URL","login","username","password","post","then","response","data","accessToken","console","log","logout","localStorage","removeItem","register","email","getUsers","get","headers","authHeader","makeAdmin","updateUser","user","JSON","parse","getItem","Authorization"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,MAAMC,OAAO,GAAG,iCAAhB;AAEA,OAAO,MAAMC,KAAK,GAAG,CAACC,QAAD,EAAWC,QAAX,KAAwB;AAC5C,SAAOJ,KAAK,CAACK,IAAN,CAAWJ,OAAO,GAAG,OAArB,EAA8B;AAAEE,IAAAA,QAAF;AAAYC,IAAAA;AAAZ,GAA9B,EACLE,IADK,CACCC,QAAD,IAAc;AACnB,QAAIA,QAAQ,CAACC,IAAT,CAAcC,WAAlB,EAA+B;AAC9BC,MAAAA,OAAO,CAACC,GAAR,CAAYJ,QAAQ,CAACC,IAArB,EAD8B,CAE9B;AACA;;AACD,WAAOD,QAAQ,CAACC,IAAhB;AACA,GAPK,CAAP;AAQA,CATM;AAWP,OAAO,MAAMI,MAAM,GAAG,MAAM;AAC3BC,EAAAA,YAAY,CAACC,UAAb,CAAwB,MAAxB;AACA,CAFM;AAIP,OAAO,MAAMC,QAAQ,GAAG,CAACZ,QAAD,EAAWa,KAAX,EAAkBZ,QAAlB,KAA+B;AACtD,SAAOJ,KAAK,CAACK,IAAN,CAAWJ,OAAO,GAAG,UAArB,EAAiC;AACvCE,IAAAA,QADuC;AAEvCa,IAAAA,KAFuC;AAGvCZ,IAAAA;AAHuC,GAAjC,CAAP;AAKA,CANM;AAQP,OAAO,MAAMa,QAAQ,GAAG,MAAM;AAC7B,SAAOjB,KAAK,CAACkB,GAAN,CAAUjB,OAAO,GAAG,OAApB,EAA6B;AAAEkB,IAAAA,OAAO,EAAEC,UAAU;AAArB,GAA7B,CAAP;AACA,CAFM;AAIP,OAAO,MAAMC,SAAS,GAAG,MAAM;AAC9B,SAAOrB,KAAK,CAACkB,GAAN,CAAUjB,OAAO,GAAG,WAApB,EAAiC;AAAEkB,IAAAA,OAAO,EAAEC,UAAU;AAArB,GAAjC,CAAP,CAD8B,CACsC;AACpE,CAFM;AAIP,OAAO,MAAME,UAAU,GAAG,MAAM;AAC/B,SAAOtB,KAAK,CAACkB,GAAN,CAAUjB,OAAO,GAAG,MAApB,EAA4B;AAAEkB,IAAAA,OAAO,EAAEC,UAAU;AAArB,GAA5B,CAAP,CAD+B,CACgC;AAC/D,CAFM;AAIP,OAAO,MAAMA,UAAU,GAAG,MAAM;AAC9B,QAAMG,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWZ,YAAY,CAACa,OAAb,CAAqB,MAArB,CAAX,CAAb;;AAEA,MAAIH,IAAI,IAAIA,IAAI,CAACd,WAAjB,EAA8B;AAC5B,WAAO;AAAEkB,MAAAA,aAAa,EAAE,YAAYJ,IAAI,CAACd;AAAlC,KAAP;AACD,GAFD,MAEO;AACL,WAAO,EAAP;AACD;AACF,CARM","sourcesContent":["import axios from \"axios\";\n\nconst API_URL = \"http://localhost:8080/seguridad\";\n\nexport const login = (username, password) => {\n\treturn axios.post(API_URL + \"login\", { username, password })\n\t\t.then((response) => {\n\t\t\tif (response.data.accessToken) {\n\t\t\t\tconsole.log(response.data);\n\t\t\t\t// localStorage.setItem(\"user\", JSON.stringify(response.data));\n\t\t\t}\n\t\t\treturn response.data;\n\t\t});\n}\n\nexport const logout = () => {\n\tlocalStorage.removeItem(\"user\");\n}\n\nexport const register = (username, email, password) => {\n\treturn axios.post(API_URL + \"registro\", {\n\t\tusername,\n\t\temail,\n\t\tpassword,\n\t});\n}\n\nexport const getUsers = () => {\n\treturn axios.get(API_URL + 'users', { headers: authHeader() });\n}\n\nexport const makeAdmin = () => {\n\treturn axios.get(API_URL + 'makeAdmin', { headers: authHeader() }); // necesita un /id para identificar el usuario\n}\n\nexport const updateUser = () => {\n\treturn axios.get(API_URL + 'user', { headers: authHeader() }); // necesita un /id para identificar el usuario\n}\n\nexport const authHeader = () => {\n  const user = JSON.parse(localStorage.getItem('user'));\n\n  if (user && user.accessToken) {\n    return { Authorization: 'Bearer ' + user.accessToken };\n  } else {\n    return {};\n  }\n}"]},"metadata":{},"sourceType":"module"}