{"ast":null,"code":"var _jsxFileName = \"/Users/nicolaspavon/Desktop/ReposFacu/seguridadFE/src/Screens/SignUp.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Button, Link, makeStyles, Container, TextField } from \"@material-ui/core\";\nimport ClipLoader from \"react-spinners/ClipLoader\";\nimport { TextInput, Title } from \"../Components\";\nimport moment from \"moment\";\nimport { validateName, validateNumber } from \"../Utils/Validations\";\nimport { useHistory } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst axios = require(\"axios\").default;\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\"\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main\n  },\n  form: {\n    width: \"100%\",\n    marginTop: theme.spacing(1)\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  }\n}));\n\nconst SignUp = () => {\n  _s();\n\n  const classes = useStyles();\n  const history = useHistory();\n\n  const getToday = () => {\n    const today = new Date();\n    const dd = String(today.getDate()).padStart(2, \"0\");\n    const mm = String(today.getMonth() + 1).padStart(2, \"0\"); //January is 0!\n\n    const yyyy = today.getFullYear();\n    return dd + \"-\" + mm + \"-\" + yyyy;\n  };\n\n  const [loading, setLoading] = useState(false);\n  const [userCI, setUserCI] = useState(\"\");\n  const [userName, setUserName] = useState(\"\");\n  const [userSurnames, setUserSurnames] = useState(\"\");\n  const [birthday, setBirthday] = useState(\"\");\n  const [number, setNumber] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [ciError, setCiError] = useState(false);\n  const [nameError, setnameError] = useState(false);\n  const [surnameError, setSurnameError] = useState(false);\n  const [passwordError, setPassowrdError] = useState(false);\n  const [numberError, setNumberError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  useEffect(() => {\n    const today = getToday();\n    const format = today.replaceAll(\"-\", \"/\");\n    setBirthday(format + \" 00:00\");\n  }, []);\n\n  const handleInput = e => {\n    setErrorMessage(\"\");\n    const {\n      value,\n      name\n    } = e.target;\n\n    switch (name) {\n      case \"ci\":\n        setUserCI(value);\n        setCiError(!validateNumber(value) || value.length !== 8);\n        break;\n\n      case \"name\":\n        setUserName(value);\n        setnameError(!validateName(value) || value.length <= 2);\n        break;\n\n      case \"surnames\":\n        setUserSurnames(value);\n        setSurnameError(!validateName(value) || value.split(\" \").length < 2);\n        break;\n\n      case \"phone\":\n        setNumber(value);\n        setNumberError(!validateNumber(value) || value.length < 5);\n        break;\n\n      case \"date\":\n        const format = moment(value).format(\"L\");\n        setBirthday(format + \" 00:00\");\n        break;\n\n      case \"password\":\n        setPassword(value);\n        setPassowrdError(value.length < 5);\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  const data = {\n    nombre: userName,\n    apellidos: userSurnames,\n    ci: userCI,\n    fecha_nacimiento: birthday,\n    password: password\n  };\n\n  const createEvent = () => {\n    setErrorMessage(\"\");\n    setLoading(true);\n    axios.post(\"http://localhost:8080/coronavirus/registro\", data).then(function (response) {\n      const {\n        data\n      } = response;\n\n      if (data.message === \"Persona ya registrada.\") {\n        setErrorMessage(\"Persona ya registrada\");\n        setLoading(false);\n      } else {\n        history.push(\"/signin\");\n        setLoading(false);\n      }\n    }).catch(function (error) {\n      setLoading(false);\n      console.log(\"Error\", error);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    children: [/*#__PURE__*/_jsxDEV(Title, {\n      text: \" Crear Cuenta\",\n      white: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: classes.form,\n      noValidate: true,\n      children: [/*#__PURE__*/_jsxDEV(TextInput, {\n        id: \"ci\",\n        onChange: handleInput,\n        label: \"C.I\",\n        name: \"ci\",\n        error: ciError,\n        errorMessage: \"Ingrese un numero de CI valido\",\n        type: \"number\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextInput, {\n        id: \"name\",\n        onChange: handleInput,\n        label: \"Name\",\n        name: \"name\",\n        error: nameError,\n        errorMessage: \"Ingrese un nombre valido\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextInput, {\n        id: \"surnames\",\n        onChange: handleInput,\n        label: \"Apellidos\",\n        name: \"surnames\",\n        error: surnameError,\n        errorMessage: \"Ingrese sus apellidos correctamente\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextInput, {\n        id: \"phone\",\n        onChange: handleInput,\n        label: \"Telefono\",\n        name: \"phone\",\n        error: numberError,\n        errorMessage: \"Ingrese un numero valido\",\n        type: \"number\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        id: \"date\",\n        label: \"Fecha de Nacimiento\",\n        type: \"date\",\n        name: \"date\",\n        margin: \"normal\",\n        fullWidth: true,\n        onChange: text => {\n          handleInput(text);\n        },\n        defaultValue: birthday,\n        className: classes.textField,\n        InputLabelProps: {\n          shrink: true\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextInput, {\n        id: \"password\",\n        onChange: handleInput,\n        label: \"Contraseña\",\n        name: \"password\",\n        error: passwordError,\n        errorMessage: \"Ingrese un contraseña mas larga\",\n        type: \"password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ClipLoader, {\n        color: \"blue\",\n        loading: loading,\n        css: {\n          marginTop: 20\n        },\n        size: 30\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this), errorMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: \"red\"\n        },\n        children: [\" \", errorMessage, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 26\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        fullWidth: true,\n        disabled: loading || userCI.length === 0 || userName.length === 0 || userSurnames.length === 0 || number.length === 0 || ciError || nameError || surnameError || passwordError || numberError || errorMessage,\n        variant: \"contained\",\n        color: \"primary\",\n        className: classes.submit,\n        onClick: createEvent,\n        children: \"CREAR CUENTA\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        href: \"/signin\",\n        variant: \"body2\",\n        onClick: () => {\n          history.push(\"/signin\");\n        },\n        children: \"¿Ya estas registrado? Ingresar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 135,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SignUp, \"Ajy18mjXNeHb2dEQyg/ebpe4/RA=\", false, function () {\n  return [useStyles, useHistory];\n});\n\n_c = SignUp;\nexport default SignUp;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignUp\");","map":{"version":3,"sources":["/Users/nicolaspavon/Desktop/ReposFacu/seguridadFE/src/Screens/SignUp.jsx"],"names":["React","useState","useEffect","Button","Link","makeStyles","Container","TextField","ClipLoader","TextInput","Title","moment","validateName","validateNumber","useHistory","axios","require","default","useStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","SignUp","classes","history","getToday","today","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","loading","setLoading","userCI","setUserCI","userName","setUserName","userSurnames","setUserSurnames","birthday","setBirthday","number","setNumber","password","setPassword","ciError","setCiError","nameError","setnameError","surnameError","setSurnameError","passwordError","setPassowrdError","numberError","setNumberError","errorMessage","setErrorMessage","format","replaceAll","handleInput","e","value","name","target","length","split","data","nombre","apellidos","ci","fecha_nacimiento","createEvent","post","then","response","message","push","catch","error","console","log","text","textField","shrink","color"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SACEC,MADF,EAEEC,IAFF,EAGEC,UAHF,EAIEC,SAJF,EAKEC,SALF,QAMO,mBANP;AAOA,OAAOC,UAAP,MAAuB,2BAAvB;AACA,SAASC,SAAT,EAAoBC,KAApB,QAAiC,eAAjC;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAASC,YAAT,EAAuBC,cAAvB,QAA6C,sBAA7C;AAEA,SAASC,UAAT,QAA2B,kBAA3B;;;AAEA,MAAMC,KAAK,GAAGC,OAAO,CAAC,OAAD,CAAP,CAAiBC,OAA/B;;AAEA,MAAMC,SAAS,GAAGb,UAAU,CAAEc,KAAD,KAAY;AACvCC,EAAAA,KAAK,EAAE;AACLC,IAAAA,SAAS,EAAEF,KAAK,CAACG,OAAN,CAAc,CAAd,CADN;AAELC,IAAAA,OAAO,EAAE,MAFJ;AAGLC,IAAAA,aAAa,EAAE,QAHV;AAILC,IAAAA,UAAU,EAAE;AAJP,GADgC;AAOvCC,EAAAA,MAAM,EAAE;AACNC,IAAAA,MAAM,EAAER,KAAK,CAACG,OAAN,CAAc,CAAd,CADF;AAENM,IAAAA,eAAe,EAAET,KAAK,CAACU,OAAN,CAAcC,SAAd,CAAwBC;AAFnC,GAP+B;AAWvCC,EAAAA,IAAI,EAAE;AACJC,IAAAA,KAAK,EAAE,MADH;AAEJZ,IAAAA,SAAS,EAAEF,KAAK,CAACG,OAAN,CAAc,CAAd;AAFP,GAXiC;AAevCY,EAAAA,MAAM,EAAE;AACNP,IAAAA,MAAM,EAAER,KAAK,CAACG,OAAN,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB;AADF;AAf+B,CAAZ,CAAD,CAA5B;;AAoBA,MAAMa,MAAM,GAAG,MAAM;AAAA;;AACnB,QAAMC,OAAO,GAAGlB,SAAS,EAAzB;AACA,QAAMmB,OAAO,GAAGvB,UAAU,EAA1B;;AAEA,QAAMwB,QAAQ,GAAG,MAAM;AACrB,UAAMC,KAAK,GAAG,IAAIC,IAAJ,EAAd;AACA,UAAMC,EAAE,GAAGC,MAAM,CAACH,KAAK,CAACI,OAAN,EAAD,CAAN,CAAwBC,QAAxB,CAAiC,CAAjC,EAAoC,GAApC,CAAX;AACA,UAAMC,EAAE,GAAGH,MAAM,CAACH,KAAK,CAACO,QAAN,KAAmB,CAApB,CAAN,CAA6BF,QAA7B,CAAsC,CAAtC,EAAyC,GAAzC,CAAX,CAHqB,CAGqC;;AAC1D,UAAMG,IAAI,GAAGR,KAAK,CAACS,WAAN,EAAb;AACA,WAAOP,EAAE,GAAG,GAAL,GAAWI,EAAX,GAAgB,GAAhB,GAAsBE,IAA7B;AACD,GAND;;AAQA,QAAM,CAACE,OAAD,EAAUC,UAAV,IAAwBjD,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM,CAACkD,MAAD,EAASC,SAAT,IAAsBnD,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACoD,QAAD,EAAWC,WAAX,IAA0BrD,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACsD,YAAD,EAAeC,eAAf,IAAkCvD,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM,CAACwD,QAAD,EAAWC,WAAX,IAA0BzD,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAAC0D,MAAD,EAASC,SAAT,IAAsB3D,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAAC4D,QAAD,EAAWC,WAAX,IAA0B7D,QAAQ,CAAC,EAAD,CAAxC;AAEA,QAAM,CAAC8D,OAAD,EAAUC,UAAV,IAAwB/D,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM,CAACgE,SAAD,EAAYC,YAAZ,IAA4BjE,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAACkE,YAAD,EAAeC,eAAf,IAAkCnE,QAAQ,CAAC,KAAD,CAAhD;AACA,QAAM,CAACoE,aAAD,EAAgBC,gBAAhB,IAAoCrE,QAAQ,CAAC,KAAD,CAAlD;AACA,QAAM,CAACsE,WAAD,EAAcC,cAAd,IAAgCvE,QAAQ,CAAC,KAAD,CAA9C;AAEA,QAAM,CAACwE,YAAD,EAAeC,eAAf,IAAkCzE,QAAQ,CAAC,EAAD,CAAhD;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMqC,KAAK,GAAGD,QAAQ,EAAtB;AACA,UAAMqC,MAAM,GAAGpC,KAAK,CAACqC,UAAN,CAAiB,GAAjB,EAAsB,GAAtB,CAAf;AACAlB,IAAAA,WAAW,CAACiB,MAAM,GAAG,QAAV,CAAX;AACD,GAJQ,EAIN,EAJM,CAAT;;AAMA,QAAME,WAAW,GAAIC,CAAD,IAAO;AACzBJ,IAAAA,eAAe,CAAC,EAAD,CAAf;AACA,UAAM;AAAEK,MAAAA,KAAF;AAASC,MAAAA;AAAT,QAAkBF,CAAC,CAACG,MAA1B;;AACA,YAAQD,IAAR;AACE,WAAK,IAAL;AACE5B,QAAAA,SAAS,CAAC2B,KAAD,CAAT;AACAf,QAAAA,UAAU,CAAC,CAACnD,cAAc,CAACkE,KAAD,CAAf,IAA0BA,KAAK,CAACG,MAAN,KAAiB,CAA5C,CAAV;AACA;;AACF,WAAK,MAAL;AACE5B,QAAAA,WAAW,CAACyB,KAAD,CAAX;AACAb,QAAAA,YAAY,CAAC,CAACtD,YAAY,CAACmE,KAAD,CAAb,IAAwBA,KAAK,CAACG,MAAN,IAAgB,CAAzC,CAAZ;AACA;;AACF,WAAK,UAAL;AACE1B,QAAAA,eAAe,CAACuB,KAAD,CAAf;AACAX,QAAAA,eAAe,CAAC,CAACxD,YAAY,CAACmE,KAAD,CAAb,IAAwBA,KAAK,CAACI,KAAN,CAAY,GAAZ,EAAiBD,MAAjB,GAA0B,CAAnD,CAAf;AACA;;AACF,WAAK,OAAL;AACEtB,QAAAA,SAAS,CAACmB,KAAD,CAAT;AACAP,QAAAA,cAAc,CAAC,CAAC3D,cAAc,CAACkE,KAAD,CAAf,IAA0BA,KAAK,CAACG,MAAN,GAAe,CAA1C,CAAd;AACA;;AACF,WAAK,MAAL;AACE,cAAMP,MAAM,GAAGhE,MAAM,CAACoE,KAAD,CAAN,CAAcJ,MAAd,CAAqB,GAArB,CAAf;AAEAjB,QAAAA,WAAW,CAACiB,MAAM,GAAG,QAAV,CAAX;AACA;;AACF,WAAK,UAAL;AACEb,QAAAA,WAAW,CAACiB,KAAD,CAAX;AACAT,QAAAA,gBAAgB,CAACS,KAAK,CAACG,MAAN,GAAe,CAAhB,CAAhB;AACA;;AACF;AACE;AA3BJ;AA6BD,GAhCD;;AAkCA,QAAME,IAAI,GAAG;AACXC,IAAAA,MAAM,EAAEhC,QADG;AAEXiC,IAAAA,SAAS,EAAE/B,YAFA;AAGXgC,IAAAA,EAAE,EAAEpC,MAHO;AAIXqC,IAAAA,gBAAgB,EAAE/B,QAJP;AAKXI,IAAAA,QAAQ,EAAEA;AALC,GAAb;;AAQA,QAAM4B,WAAW,GAAG,MAAM;AACxBf,IAAAA,eAAe,CAAC,EAAD,CAAf;AACAxB,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAnC,IAAAA,KAAK,CACF2E,IADH,CACQ,4CADR,EACsDN,IADtD,EAEGO,IAFH,CAEQ,UAAUC,QAAV,EAAoB;AACxB,YAAM;AAAER,QAAAA;AAAF,UAAWQ,QAAjB;;AACA,UAAIR,IAAI,CAACS,OAAL,KAAiB,wBAArB,EAA+C;AAC7CnB,QAAAA,eAAe,CAAC,uBAAD,CAAf;AACAxB,QAAAA,UAAU,CAAC,KAAD,CAAV;AACD,OAHD,MAGO;AACLb,QAAAA,OAAO,CAACyD,IAAR,CAAa,SAAb;AACA5C,QAAAA,UAAU,CAAC,KAAD,CAAV;AACD;AACF,KAXH,EAYG6C,KAZH,CAYS,UAAUC,KAAV,EAAiB;AACtB9C,MAAAA,UAAU,CAAC,KAAD,CAAV;AACA+C,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBF,KAArB;AACD,KAfH;AAgBD,GAnBD;;AAoBA,sBACE,QAAC,SAAD;AAAW,IAAA,SAAS,EAAC,MAArB;AAA4B,IAAA,QAAQ,EAAC,IAArC;AAAA,4BACE,QAAC,KAAD;AAAO,MAAA,IAAI,EAAC,eAAZ;AAA4B,MAAA,KAAK;AAAjC;AAAA;AAAA;AAAA;AAAA,YADF,eAGE;AAAM,MAAA,SAAS,EAAE5D,OAAO,CAACJ,IAAzB;AAA+B,MAAA,UAAU,MAAzC;AAAA,8BACE,QAAC,SAAD;AACE,QAAA,EAAE,EAAE,IADN;AAEE,QAAA,QAAQ,EAAE6C,WAFZ;AAGE,QAAA,KAAK,EAAE,KAHT;AAIE,QAAA,IAAI,EAAE,IAJR;AAKE,QAAA,KAAK,EAAEd,OALT;AAME,QAAA,YAAY,EAAE,gCANhB;AAOE,QAAA,IAAI,EAAE;AAPR;AAAA;AAAA;AAAA;AAAA,cADF,eAUE,QAAC,SAAD;AACE,QAAA,EAAE,EAAE,MADN;AAEE,QAAA,QAAQ,EAAEc,WAFZ;AAGE,QAAA,KAAK,EAAE,MAHT;AAIE,QAAA,IAAI,EAAE,MAJR;AAKE,QAAA,KAAK,EAAEZ,SALT;AAME,QAAA,YAAY,EAAE;AANhB;AAAA;AAAA;AAAA;AAAA,cAVF,eAkBE,QAAC,SAAD;AACE,QAAA,EAAE,EAAE,UADN;AAEE,QAAA,QAAQ,EAAEY,WAFZ;AAGE,QAAA,KAAK,EAAE,WAHT;AAIE,QAAA,IAAI,EAAE,UAJR;AAKE,QAAA,KAAK,EAAEV,YALT;AAME,QAAA,YAAY,EAAE;AANhB;AAAA;AAAA;AAAA;AAAA,cAlBF,eA0BE,QAAC,SAAD;AACE,QAAA,EAAE,EAAE,OADN;AAEE,QAAA,QAAQ,EAAEU,WAFZ;AAGE,QAAA,KAAK,EAAE,UAHT;AAIE,QAAA,IAAI,EAAE,OAJR;AAKE,QAAA,KAAK,EAAEN,WALT;AAME,QAAA,YAAY,EAAE,0BANhB;AAOE,QAAA,IAAI,EAAE;AAPR;AAAA;AAAA;AAAA;AAAA,cA1BF,eAmCE,QAAC,SAAD;AACE,QAAA,EAAE,EAAC,MADL;AAEE,QAAA,KAAK,EAAC,qBAFR;AAGE,QAAA,IAAI,EAAC,MAHP;AAIE,QAAA,IAAI,EAAC,MAJP;AAKE,QAAA,MAAM,EAAC,QALT;AAME,QAAA,SAAS,MANX;AAOE,QAAA,QAAQ,EAAG4B,IAAD,IAAU;AAClBtB,UAAAA,WAAW,CAACsB,IAAD,CAAX;AACD,SATH;AAUE,QAAA,YAAY,EAAE1C,QAVhB;AAWE,QAAA,SAAS,EAAErB,OAAO,CAACgE,SAXrB;AAYE,QAAA,eAAe,EAAE;AACfC,UAAAA,MAAM,EAAE;AADO;AAZnB;AAAA;AAAA;AAAA;AAAA,cAnCF,eAmDE,QAAC,SAAD;AACE,QAAA,EAAE,EAAE,UADN;AAEE,QAAA,QAAQ,EAAExB,WAFZ;AAGE,QAAA,KAAK,EAAE,YAHT;AAIE,QAAA,IAAI,EAAE,UAJR;AAKE,QAAA,KAAK,EAAER,aALT;AAME,QAAA,YAAY,EAAE,iCANhB;AAOE,QAAA,IAAI,EAAE;AAPR;AAAA;AAAA;AAAA;AAAA,cAnDF,eA6DE,QAAC,UAAD;AACE,QAAA,KAAK,EAAE,MADT;AAEE,QAAA,OAAO,EAAEpB,OAFX;AAGE,QAAA,GAAG,EAAE;AAAE5B,UAAAA,SAAS,EAAE;AAAb,SAHP;AAIE,QAAA,IAAI,EAAE;AAJR;AAAA;AAAA;AAAA;AAAA,cA7DF,EAoEGoD,YAAY,iBAAI;AAAK,QAAA,KAAK,EAAE;AAAE6B,UAAAA,KAAK,EAAE;AAAT,SAAZ;AAAA,wBAAgC7B,YAAhC;AAAA;AAAA;AAAA;AAAA;AAAA,cApEnB,eAsEE,QAAC,MAAD;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,SAAS,MAFX;AAGE,QAAA,QAAQ,EACNxB,OAAO,IACPE,MAAM,CAAC+B,MAAP,KAAkB,CADlB,IAEA7B,QAAQ,CAAC6B,MAAT,KAAoB,CAFpB,IAGA3B,YAAY,CAAC2B,MAAb,KAAwB,CAHxB,IAIAvB,MAAM,CAACuB,MAAP,KAAkB,CAJlB,IAKAnB,OALA,IAMAE,SANA,IAOAE,YAPA,IAQAE,aARA,IASAE,WATA,IAUAE,YAdJ;AAgBE,QAAA,OAAO,EAAC,WAhBV;AAiBE,QAAA,KAAK,EAAC,SAjBR;AAkBE,QAAA,SAAS,EAAErC,OAAO,CAACF,MAlBrB;AAmBE,QAAA,OAAO,EAAEuD,WAnBX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAtEF,eA6FE,QAAC,IAAD;AACE,QAAA,IAAI,EAAC,SADP;AAEE,QAAA,OAAO,EAAC,OAFV;AAGE,QAAA,OAAO,EAAE,MAAM;AACbpD,UAAAA,OAAO,CAACyD,IAAR,CAAa,SAAb;AACD,SALH;AAAA,kBAOG;AAPH;AAAA;AAAA;AAAA;AAAA,cA7FF;AAAA;AAAA;AAAA;AAAA;AAAA,YAHF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AA6GD,CA7MD;;GAAM3D,M;UACYjB,S,EACAJ,U;;;KAFZqB,M;AA+MN,eAAeA,MAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  Button,\n  Link,\n  makeStyles,\n  Container,\n  TextField,\n} from \"@material-ui/core\";\nimport ClipLoader from \"react-spinners/ClipLoader\";\nimport { TextInput, Title } from \"../Components\";\nimport moment from \"moment\";\nimport { validateName, validateNumber } from \"../Utils/Validations\";\n\nimport { useHistory } from \"react-router-dom\";\n\nconst axios = require(\"axios\").default;\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: \"100%\",\n    marginTop: theme.spacing(1),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n}));\n\nconst SignUp = () => {\n  const classes = useStyles();\n  const history = useHistory();\n\n  const getToday = () => {\n    const today = new Date();\n    const dd = String(today.getDate()).padStart(2, \"0\");\n    const mm = String(today.getMonth() + 1).padStart(2, \"0\"); //January is 0!\n    const yyyy = today.getFullYear();\n    return dd + \"-\" + mm + \"-\" + yyyy;\n  };\n\n  const [loading, setLoading] = useState(false);\n  const [userCI, setUserCI] = useState(\"\");\n  const [userName, setUserName] = useState(\"\");\n  const [userSurnames, setUserSurnames] = useState(\"\");\n  const [birthday, setBirthday] = useState(\"\");\n  const [number, setNumber] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const [ciError, setCiError] = useState(false);\n  const [nameError, setnameError] = useState(false);\n  const [surnameError, setSurnameError] = useState(false);\n  const [passwordError, setPassowrdError] = useState(false);\n  const [numberError, setNumberError] = useState(false);\n\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  useEffect(() => {\n    const today = getToday();\n    const format = today.replaceAll(\"-\", \"/\");\n    setBirthday(format + \" 00:00\");\n  }, []);\n\n  const handleInput = (e) => {\n    setErrorMessage(\"\");\n    const { value, name } = e.target;\n    switch (name) {\n      case \"ci\":\n        setUserCI(value);\n        setCiError(!validateNumber(value) || value.length !== 8);\n        break;\n      case \"name\":\n        setUserName(value);\n        setnameError(!validateName(value) || value.length <= 2);\n        break;\n      case \"surnames\":\n        setUserSurnames(value);\n        setSurnameError(!validateName(value) || value.split(\" \").length < 2);\n        break;\n      case \"phone\":\n        setNumber(value);\n        setNumberError(!validateNumber(value) || value.length < 5);\n        break;\n      case \"date\":\n        const format = moment(value).format(\"L\");\n\n        setBirthday(format + \" 00:00\");\n        break;\n      case \"password\":\n        setPassword(value);\n        setPassowrdError(value.length < 5);\n        break;\n      default:\n        break;\n    }\n  };\n\n  const data = {\n    nombre: userName,\n    apellidos: userSurnames,\n    ci: userCI,\n    fecha_nacimiento: birthday,\n    password: password,\n  };\n\n  const createEvent = () => {\n    setErrorMessage(\"\");\n    setLoading(true);\n    axios\n      .post(\"http://localhost:8080/coronavirus/registro\", data)\n      .then(function (response) {\n        const { data } = response;\n        if (data.message === \"Persona ya registrada.\") {\n          setErrorMessage(\"Persona ya registrada\");\n          setLoading(false);\n        } else {\n          history.push(\"/signin\");\n          setLoading(false);\n        }\n      })\n      .catch(function (error) {\n        setLoading(false);\n        console.log(\"Error\", error);\n      });\n  };\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <Title text=\" Crear Cuenta\" white />\n\n      <form className={classes.form} noValidate>\n        <TextInput\n          id={\"ci\"}\n          onChange={handleInput}\n          label={\"C.I\"}\n          name={\"ci\"}\n          error={ciError}\n          errorMessage={\"Ingrese un numero de CI valido\"}\n          type={\"number\"}\n        />\n        <TextInput\n          id={\"name\"}\n          onChange={handleInput}\n          label={\"Name\"}\n          name={\"name\"}\n          error={nameError}\n          errorMessage={\"Ingrese un nombre valido\"}\n        />\n        <TextInput\n          id={\"surnames\"}\n          onChange={handleInput}\n          label={\"Apellidos\"}\n          name={\"surnames\"}\n          error={surnameError}\n          errorMessage={\"Ingrese sus apellidos correctamente\"}\n        />\n        <TextInput\n          id={\"phone\"}\n          onChange={handleInput}\n          label={\"Telefono\"}\n          name={\"phone\"}\n          error={numberError}\n          errorMessage={\"Ingrese un numero valido\"}\n          type={\"number\"}\n        />\n        <TextField\n          id=\"date\"\n          label=\"Fecha de Nacimiento\"\n          type=\"date\"\n          name=\"date\"\n          margin=\"normal\"\n          fullWidth\n          onChange={(text) => {\n            handleInput(text);\n          }}\n          defaultValue={birthday}\n          className={classes.textField}\n          InputLabelProps={{\n            shrink: true,\n          }}\n        />\n        <TextInput\n          id={\"password\"}\n          onChange={handleInput}\n          label={\"Contraseña\"}\n          name={\"password\"}\n          error={passwordError}\n          errorMessage={\"Ingrese un contraseña mas larga\"}\n          type={\"password\"}\n        />\n\n        <ClipLoader\n          color={\"blue\"}\n          loading={loading}\n          css={{ marginTop: 20 }}\n          size={30}\n        />\n\n        {errorMessage && <div style={{ color: \"red\" }}> {errorMessage} </div>}\n\n        <Button\n          type=\"submit\"\n          fullWidth\n          disabled={\n            loading ||\n            userCI.length === 0 ||\n            userName.length === 0 ||\n            userSurnames.length === 0 ||\n            number.length === 0 ||\n            ciError ||\n            nameError ||\n            surnameError ||\n            passwordError ||\n            numberError ||\n            errorMessage\n          }\n          variant=\"contained\"\n          color=\"primary\"\n          className={classes.submit}\n          onClick={createEvent}\n        >\n          CREAR CUENTA\n        </Button>\n        <Link\n          href=\"/signin\"\n          variant=\"body2\"\n          onClick={() => {\n            history.push(\"/signin\");\n          }}\n        >\n          {\"¿Ya estas registrado? Ingresar\"}\n        </Link>\n      </form>\n    </Container>\n  );\n};\n\nexport default SignUp;\n"]},"metadata":{},"sourceType":"module"}